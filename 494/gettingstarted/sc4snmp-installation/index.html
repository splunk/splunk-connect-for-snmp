
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.7">
    
    
      
        <title>Install SC4SNMP - Splunk Connect for SNMP (SC4SNMP)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sc4snmp-helm-installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Splunk Connect for SNMP (SC4SNMP)" class="md-header__button md-logo" aria-label="Splunk Connect for SNMP (SC4SNMP)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splunk Connect for SNMP (SC4SNMP)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Install SC4SNMP
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Splunk Connect for SNMP (SC4SNMP)" class="md-nav__button md-logo" aria-label="Splunk Connect for SNMP (SC4SNMP)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Splunk Connect for SNMP (SC4SNMP)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../splunk-requirements/" class="md-nav__link">
        Splunk Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mk8s/k8s-microk8s/" class="md-nav__link">
        Platform Microk8s
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sck-installation/" class="md-nav__link">
        Install Splunk OpenTelemetry Collector for Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Install SC4SNMP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Install SC4SNMP
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-sc4snmp-repository" class="md-nav__link">
    Add SC4SNMP repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-modify-valuesyaml" class="md-nav__link">
    Download and modify values.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-splunk-enterprise-or-splunk-cloud-connection" class="md-nav__link">
    Configure Splunk Enterprise or Splunk Cloud Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-splunk-infrastructure-monitoring-connection" class="md-nav__link">
    Configure Splunk Infrastructure Monitoring Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-sc4snmp" class="md-nav__link">
    Install SC4SNMP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-deployment" class="md-nav__link">
    Verify deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-snmp-traps" class="md-nav__link">
    Test SNMP Traps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-snmp-poller" class="md-nav__link">
    Test SNMP Poller
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../ha/" class="md-nav__link">
        High Availability
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/deployment-configuration/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/poller-configuration/" class="md-nav__link">
        Poller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/trap-configuration/" class="md-nav__link">
        Trap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/scheduler-configuration/" class="md-nav__link">
        Scheduler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/worker-configuration/" class="md-nav__link">
        Worker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/mongo-configuration/" class="md-nav__link">
        Mongo DB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/redis-configuration/" class="md-nav__link">
        RabbitMQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/snmpv3-configuration/" class="md-nav__link">
        SNMPv3 configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/sim-configuration/" class="md-nav__link">
        Splunk Infrastructure Monitoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../planning/" class="md-nav__link">
        Planning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../security/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../mib-request/" class="md-nav__link">
        Request MIB
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../bestpractices/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-sc4snmp-repository" class="md-nav__link">
    Add SC4SNMP repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-and-modify-valuesyaml" class="md-nav__link">
    Download and modify values.yaml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-splunk-enterprise-or-splunk-cloud-connection" class="md-nav__link">
    Configure Splunk Enterprise or Splunk Cloud Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-splunk-infrastructure-monitoring-connection" class="md-nav__link">
    Configure Splunk Infrastructure Monitoring Connection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-sc4snmp" class="md-nav__link">
    Install SC4SNMP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-deployment" class="md-nav__link">
    Verify deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-snmp-traps" class="md-nav__link">
    Test SNMP Traps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-snmp-poller" class="md-nav__link">
    Test SNMP Poller
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="sc4snmp-helm-installation">SC4SNMP Helm installation<a class="headerlink" href="#sc4snmp-helm-installation" title="Permanent link">&para;</a></h1>
<p>The basic installation process and configuration used in this section are typical 
for single node non HA deployments and do not have resource requests and limits.
See the configuration sections for mongo, redis, scheduler, worker, and traps for guidance
on production configuration.</p>
<h3 id="add-sc4snmp-repository">Add SC4SNMP repository<a class="headerlink" href="#add-sc4snmp-repository" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nv">microk8s</span> <span class="nv">helm3</span> <span class="nv">repo</span> <span class="nv">add</span> <span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span> <span class="nv">https</span>:<span class="o">//</span><span class="nv">splunk</span>.<span class="nv">github</span>.<span class="nv">io</span><span class="o">/</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span>
<span class="nv">microk8s</span> <span class="nv">helm3</span> <span class="nv">repo</span> <span class="nv">update</span>
</code></pre></div>

<p>Now the package should be visible in <code>helm3</code> search command result:</p>
<div class="codehilite"><pre><span></span><code>microk8s helm3 search repo snmp
</code></pre></div>

<p>Example output:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">NAME</span>                                               <span class="nv">CHART</span> <span class="nv">VERSION</span>  <span class="nv">APP</span> <span class="nv">VERSION</span>    <span class="nv">DESCRIPTION</span>                           
<span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">/</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span>        <span class="mi">1</span>.<span class="mi">0</span>.<span class="mi">0</span>        <span class="mi">1</span>.<span class="mi">0</span>.<span class="mi">0</span>       <span class="nv">A</span> <span class="nv">Helm</span> <span class="nv">chart</span> <span class="k">for</span> <span class="nv">SNMP</span> <span class="k">Connect</span> <span class="k">for</span> <span class="nv">SNMP</span>
</code></pre></div>

<h3 id="download-and-modify-valuesyaml">Download and modify values.yaml<a class="headerlink" href="#download-and-modify-valuesyaml" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">splunk</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span><span class="w"></span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="c1">###SPLUNK_HOST###</span><span class="w"></span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="c1">###SPLUNK_TOKEN###</span><span class="w"></span>
<span class="w">  </span><span class="nt">insecureSSL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;###SPLUNK_PORT###&quot;</span><span class="w"></span>
<span class="nt">image</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Always&quot;</span><span class="w"></span>
<span class="nt">traps</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">communities</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">2c</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homelab</span><span class="w"></span>
<span class="w">  </span><span class="c1">#usernameSecrets:</span><span class="w"></span>
<span class="w">  </span><span class="c1">#  - sc4snmp-hlab-sha-aes</span><span class="w"></span>
<span class="w">  </span><span class="c1">#  - sc4snmp-hlab-sha-des</span><span class="w"></span>

<span class="w">  </span><span class="c1">#loadBalancerIP: The IP address in the metallb pool</span><span class="w"></span>
<span class="w">  </span><span class="nt">loadBalancerIP</span><span class="p">:</span><span class="w"> </span><span class="c1">###X.X.X.X###</span><span class="w"></span>
<span class="nt">worker</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># There are 3 types of workers </span><span class="w"></span>
<span class="w">  </span><span class="nt">trap</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># replicaCount: number of trap-worker pods which consumes trap tasks</span><span class="w"></span>
<span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">    </span><span class="c1">#autoscaling: use it instead of replicaCount in order to make pods scalable by itself</span><span class="w"></span>
<span class="w">    </span><span class="c1">#autoscaling:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  enabled: true</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  minReplicas: 2</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  maxReplicas: 40</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  targetCPUUtilizationPercentage: 80</span><span class="w"></span>
<span class="w">  </span><span class="nt">poller</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># replicaCount: number of poller-worker pods which consumes polling tasks</span><span class="w"></span>
<span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">    </span><span class="c1">#autoscaling: use it instead of replicaCount in order to make pods scalable by itself</span><span class="w"></span>
<span class="w">    </span><span class="c1">#autoscaling:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  enabled: true</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  minReplicas: 2</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  maxReplicas: 40</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  targetCPUUtilizationPercentage: 80</span><span class="w"></span>
<span class="w">  </span><span class="nt">sender</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># replicaCount: number of sender-worker pods which consumes sending tasks</span><span class="w"></span>
<span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">    </span><span class="c1"># autoscaling: use it instead of replicaCount in order to make pods scalable by itself</span><span class="w"></span>
<span class="w">    </span><span class="c1">#autoscaling:</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  enabled: true</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  minReplicas: 2</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  maxReplicas: 40</span><span class="w"></span>
<span class="w">    </span><span class="c1">#  targetCPUUtilizationPercentage: 80</span><span class="w"></span>
<span class="w">  </span><span class="c1"># udpConnectionTimeout: timeout in seconds for SNMP operations</span><span class="w"></span>
<span class="w">  </span><span class="c1">#udpConnectionTimeout: 5</span><span class="w"></span>
<span class="w">  </span><span class="nt">logLevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span><span class="w"></span>
<span class="nt">scheduler</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">logLevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span><span class="w"></span>
<span class="c1">#  profiles: |</span><span class="w"></span>
<span class="c1">#    generic_switch:</span><span class="w"></span>
<span class="c1">#      frequency: 60</span><span class="w"></span>
<span class="c1">#      varBinds:</span><span class="w"></span>
<span class="c1">#        - [&#39;SNMPv2-MIB&#39;, &#39;sysDescr&#39;]</span><span class="w"></span>
<span class="c1">#        - [&#39;SNMPv2-MIB&#39;, &#39;sysName&#39;, 0]</span><span class="w"></span>
<span class="c1">#        - [&#39;IF-MIB&#39;]</span><span class="w"></span>
<span class="c1">#        - [&#39;TCP-MIB&#39;]</span><span class="w"></span>
<span class="c1">#        - [&#39;UDP-MIB&#39;]</span><span class="w"></span>
<span class="nt">poller</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="c1"># usernameSecrets:</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   - sc4snmp-hlab-sha-aes</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   - sc4snmp-hlab-sha-des</span><span class="w"></span>
<span class="w"> </span><span class="c1"># inventory: |</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   address,port,version,community,secret,security_engine,walk_interval,profiles,smart_profiles,delete</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   10.0.0.1,,3,,sc4snmp-hlab-sha-aes,,600,,,</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   10.0.0.199,,2c,public,,,600,,,True</span><span class="w"></span>
<span class="w"> </span><span class="c1">#   10.0.0.100,,3,,sc4snmp-hlab-sha-des,,600,,,</span><span class="w"></span>
<span class="nt">sim</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># sim must be enabled if you want to use signalFx</span><span class="w"></span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="c1">#  signalfxToken: BCwaJ_Ands4Xh7Nrg</span><span class="w"></span>
<span class="c1">#  signalfxRealm: us0</span><span class="w"></span>
<span class="nt">mongodb</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">pdb</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">create</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">persistence</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;microk8s-hostpath&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">volumePermissions</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</code></pre></div>

<p><code>values.yaml</code> is being used during the installation process for configuring Kubernetes values.</p>
<h3 id="configure-splunk-enterprise-or-splunk-cloud-connection">Configure Splunk Enterprise or Splunk Cloud Connection<a class="headerlink" href="#configure-splunk-enterprise-or-splunk-cloud-connection" title="Permanent link">&para;</a></h3>
<p>Splunk Enterprise or Splunk Cloud connection is enabled by default, to disable Splunk Enterprise or Splunk Cloud <code>splunk.enabled</code> property must be set to <code>false</code>.
Additionally, connection parameters for Splunk Enterprise or Splunk Cloud needs to be set in <code>splunk</code> section: </p>
<table>
<thead>
<tr>
<th>Placeholder</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>###SPLUNK_HOST###</td>
<td>host address of splunk instance</td>
<td>&ldquo;i-08c221389a3b9899a.ec2.splunkit.io&rdquo;</td>
</tr>
<tr>
<td>###SPLUNK_PORT###</td>
<td>port number of splunk instance</td>
<td>&ldquo;8088&rdquo;</td>
</tr>
<tr>
<td>###SPLUNK_TOKEN###</td>
<td>Splunk HTTP Event Collector token</td>
<td>450a69af-16a9-4f87-9628-c26f04ad3785</td>
</tr>
<tr>
<td>###X.X.X.X###</td>
<td>SHARED IP address used for SNMP Traps</td>
<td>10.202.18.166</td>
</tr>
</tbody>
</table>
<p>Other optional variables can be configured:</p>
<table>
<thead>
<tr>
<th>variable</th>
<th>description</th>
<th>default</th>
</tr>
</thead>
<tbody>
<tr>
<td>splunk.protocol</td>
<td>port of splunk instance</td>
<td>https</td>
</tr>
<tr>
<td>splunk.insecure_ssl</td>
<td>is insecure ssl allowed</td>
<td>&ldquo;true&rdquo;</td>
</tr>
<tr>
<td>splunk.eventIndex</td>
<td>name of the events index</td>
<td>&ldquo;netops&rdquo;</td>
</tr>
<tr>
<td>splunk.metricsIndex</td>
<td>name of the metrics index</td>
<td>&ldquo;netmetrics&rdquo;</td>
</tr>
</tbody>
</table>
<h3 id="configure-splunk-infrastructure-monitoring-connection">Configure Splunk Infrastructure Monitoring Connection<a class="headerlink" href="#configure-splunk-infrastructure-monitoring-connection" title="Permanent link">&para;</a></h3>
<p>Splunk Infrastructure Monitoring is disabled by default, to enable Splunk Infrastructure Monitoring 
<code>sim.enabled</code> property must be set to <code>true</code>.
Additionally, connection parameters for Splunk Infrastructure Monitoring need to be set in <code>sim</code> section:</p>
<table>
<thead>
<tr>
<th>variable</th>
<th>description</th>
<th>default</th>
</tr>
</thead>
<tbody>
<tr>
<td>signalfxToken</td>
<td>SIM token which can be use for ingesting date vi API</td>
<td>not set</td>
</tr>
<tr>
<td>signalfxRealm</td>
<td>Real of SIM</td>
<td>not set</td>
</tr>
</tbody>
</table>
<p>For more details please check <a href="../../configuration/sim-configuration/">SIM Configuration</a></p>
<h3 id="install-sc4snmp">Install SC4SNMP<a class="headerlink" href="#install-sc4snmp" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>microk8s helm3 install snmp -f values.yaml splunk-connect-for-snmp/splunk-connect-for-snmp --namespace<span class="o">=</span>sc4snmp --create-namespace
</code></pre></div>

<p>From now on, when editing SC4SNMP configuration, the configuration change must be
inserted in the corresponding section of <code>values.yaml</code>. For more details check <a href="../../configuration/deployment-configuration/">configuration</a> section.</p>
<p>Use the following command to propagate configuration changes:</p>
<div class="codehilite"><pre><span></span><code>microk8s helm3 upgrade --install snmp -f values.yaml splunk-connect-for-snmp/splunk-connect-for-snmp --namespace<span class="o">=</span>sc4snmp --create-namespace
</code></pre></div>

<h3 id="verify-deployment">Verify deployment<a class="headerlink" href="#verify-deployment" title="Permanent link">&para;</a></h3>
<p>In a few minutes, all pods should be up and running. It can be verified with:</p>
<div class="codehilite"><pre><span></span><code>microk8s kubectl get pods -n sc4snmp
</code></pre></div>

<p>Example output:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">NAME</span>                                                      <span class="nv">READY</span>   <span class="nv">STATUS</span>             <span class="nv">RESTARTS</span>      <span class="nv">AGE</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">-</span><span class="nv">scheduler</span><span class="o">-</span><span class="mi">7</span><span class="nv">ddbc8d75</span><span class="o">-</span><span class="nv">bljsj</span>        <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">-</span><span class="nv">worker</span><span class="o">-</span><span class="nv">poller</span><span class="o">-</span><span class="mi">57</span><span class="nv">cd8f4665</span><span class="o">-</span><span class="mi">9</span><span class="nv">z9vx</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">-</span><span class="nv">worker</span><span class="o">-</span><span class="nv">sender</span><span class="o">-</span><span class="mi">5</span><span class="nv">c44cbb9c5</span><span class="o">-</span><span class="nv">ppmb5</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">-</span><span class="nv">worker</span><span class="o">-</span><span class="nv">trap</span><span class="o">-</span><span class="mi">549766</span><span class="nv">d4</span><span class="o">-</span><span class="mi">28</span><span class="nv">qzh</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">mibserver</span><span class="o">-</span><span class="mi">7</span><span class="nv">f879c5b7c</span><span class="o">-</span><span class="nv">hz9tz</span>                               <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">mongodb</span><span class="o">-</span><span class="mi">869</span><span class="nv">cc8586f</span><span class="o">-</span><span class="nv">vvr9f</span>                                 <span class="mi">2</span><span class="o">/</span><span class="mi">2</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">redis</span><span class="o">-</span><span class="nv">master</span><span class="o">-</span><span class="mi">0</span>                                           <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">133</span><span class="nv">m</span>
<span class="nv">snmp</span><span class="o">-</span><span class="nv">splunk</span><span class="o">-</span><span class="k">connect</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nv">snmp</span><span class="o">-</span><span class="nv">trap</span><span class="o">-</span><span class="mi">78759</span><span class="nv">bfc8b</span><span class="o">-</span><span class="mi">79</span><span class="nv">m6d</span>            <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="nv">Running</span>   <span class="mi">0</span>          <span class="mi">99</span><span class="nv">m</span>
</code></pre></div>

<h3 id="test-snmp-traps">Test SNMP Traps<a class="headerlink" href="#test-snmp-traps" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Test the Trap by logging into Splunk and confirming the presence of events
    in snmp <code>netops</code> and metrics in <code>netmetrics</code> index</p>
</li>
<li>
<p>Test the trap from a Linux system with SNMP installed. Replace the IP address 
    <code>10.0.101.22</code> with the shared IP address above</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>apt update
apt-get install snmpd
snmptrap -v2c -c public <span class="m">10</span>.0.101.22 <span class="m">123</span> <span class="m">1</span>.3.6.1.2.1.1.4 <span class="m">1</span>.3.6.1.2.1.1.4 s <span class="nb">test</span>
</code></pre></div>

<ul>
<li>Search Splunk: You should see one event per trap command with the host value of the
    test machine IP address</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nv">index</span><span class="o">=</span><span class="s2">&quot;netops&quot;</span> <span class="nv">sourcetype</span><span class="o">=</span><span class="s2">&quot;sc4snmp:traps&quot;</span>
</code></pre></div>

<h3 id="test-snmp-poller">Test SNMP Poller<a class="headerlink" href="#test-snmp-poller" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Test the Poller by logging into Splunk and confirming the presence of events
    in snmp <code>netops</code> and metrics in <code>netmetrics</code> index</p>
</li>
<li>
<p>Test the trap from a Linux system install snmpd.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>apt update
apt-get install snmpd
</code></pre></div>

<ul>
<li>To test SNMP poller, snmpd needs to be configured to listen on external IP. To enabled listening snmpd to external IP, 
in configuration file: <code>/etc/snmp/snmpd.conf</code> replace the IP address  <code>10.0.101.22</code> with the server IP address where snmpd is configured
<code>agentaddress  10.0.101.22,127.0.0.1,[::1]</code>. Restart snmpd by execute command:</li>
</ul>
<div class="codehilite"><pre><span></span><code>service snmpd stop
service snmpd start
</code></pre></div>

<ul>
<li>Configure SC4SNMP Poller to test add IP address which needs to be polled. Add configuration entry in <code>values.yaml</code> file by 
replace the IP address <code>10.0.101.22</code> with the server IP address where snmpd were configured.</li>
</ul>
<div class="codehilite"><pre><span></span><code>poller:
  usernameSecrets:
    - sc4snmp-homesecure-sha-aes
    - sc4snmp-homesecure-sha-des
  inventory: <span class="p">|</span>
    address,version,community,walk_interval,profiles,smart_profiles,delete
    <span class="m">10</span>.0.101.22,public,42000,,,
</code></pre></div>

<ul>
<li>Load <code>values.yaml</code> file in SC4SNMP</li>
</ul>
<div class="codehilite"><pre><span></span><code>microk8s helm3 upgrade --install snmp -f values.yaml splunk-connect-for-snmp/splunk-connect-for-snmp --namespace<span class="o">=</span>sc4snmp --create-namespace
</code></pre></div>

<ul>
<li>Check-in Splunk</li>
</ul>
<p>Before polling starts, SC4SNMP must perform Walk process on the device. It is run after configuring new device and every <code>walk_interval</code>. 
Its purpose is to gather all the data and provide meaningful context for the polling records. May be, that your device is so big that walk takes too long and scope of walking must be limited.
In such cases, enable the small walk using the instruction: <a href="/bestpractices/#walking-a-device-takes-too-much-time">walk takes too much time</a>.
When walk finishes, events appear in Splunk, check it with those queries:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">index</span><span class="o">=</span><span class="s2">&quot;netops&quot;</span> <span class="nv">sourcetype</span><span class="o">=</span><span class="s2">&quot;sc4snmp:event&quot;</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="p">|</span> mpreview <span class="nv">index</span><span class="o">=</span><span class="s2">&quot;netmetrics&quot;</span> <span class="p">|</span> search <span class="nv">sourcetype</span><span class="o">=</span><span class="s2">&quot;sc4snmp:metric&quot;</span>
</code></pre></div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../sck-installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Install Splunk OpenTelemetry Collector for Kubernetes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Install Splunk OpenTelemetry Collector for Kubernetes
            </div>
          </div>
        </a>
      
      
        
        <a href="../../ha/" class="md-footer__link md-footer__link--next" aria-label="Next: High Availability" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              High Availability
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>